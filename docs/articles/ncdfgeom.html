<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NetCDF-CF Geometry and Timeseries Tools for R • ncdfgeom</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="NetCDF-CF Geometry and Timeseries Tools for R">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ncdfgeom</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/ncdfgeom.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/geometry.html">Reading and Writing NetCDF-CF Geometry</a>
    </li>
    <li>
      <a href="../articles/timeseries.html">Reading and Writing Timeseries</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>NetCDF-CF Geometry and Timeseries Tools for R</h1>
            
      
      
      <div class="hidden name"><code>ncdfgeom.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p><code>ncdfgeom</code> is intended to write spatial geometries, their attributes, and timeseries data (that would typically be stored in two or more files) into a single file. The package provides functions to read and write NetCDF-CF Discrete Sampling Geometries point and timeseries feature types as well as NetCDF-CF spatial geometries. These utilities are meant to be general, but were designed to support working with typical geospatial feature data with linked attributes and time series in NetCDF. Supported data types include:</p>
<ul>
<li>Variables from R <code>data.frame</code> tables with one row per geometry are read from or written to NetCDF variables.</li>
<li>
<code>data.frame</code> tables with a time series per collumn are read from or written as NetCDF-CF DSG TimeSeries FeatureType data.</li>
<li>
<code>data.frame</code> table variables with a single-time-step observation for a given point location in each row are written to a NetCDF-CF DSG Point FeatureType.</li>
<li>
<code>sp</code> and <code>sf</code> spatial point, line, and polygon types can be read from or written to NetCDF-CF geometry variables introduced in CF-1.8</li>
</ul>
<p>For timeseries, two formats are supported:</p>
<ol style="list-style-type: decimal">
<li>a <code>data.frame</code> with timesteps in rows and geometry “instances” in columns with required attributes of geometry “instances” provided seperately. This format lends its self to data where the same timestamps are used for every row and data exists for all geometry instances for all time steps – it is sometimes referred to as the orthoganal array encoding.</li>
<li>a long format where each row contains all the geometry “instance” metadata, a time stamp, and the variables to be stored for that time step. This format lends its self to data where each geometry instance has unique timesteps and/or data is not available for each geometry instance at the same timesteps.</li>
</ol>
<p>Additional read / write functions to include additional DSG feature types will be implemented in the future and contributions are welcomed. <code>ncdfgeom</code> is a work in progress. Please review the <a href="https://github.com/USGS-R/ncdfgeom/issues">“issues”</a> list to submit issues and/or see what changes are planned.</p>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>At the time of writing, installation is only available via <code>devtools</code> or building the package directly as one would for development purposes.</p>
<pre><code><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages("devtools")
devtools::install_github("USGS-R/ncdfgeom")</a></code></pre>
<p>When on CRAN, the package will be installed with the typical install.packages method.</p>
<pre><code><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages("ncdfgeom")</a></code></pre>
</div>
<div id="input-data" class="section level2">
<h2 class="hasAnchor">
<a href="#input-data" class="anchor"></a>Input Data</h2>
<p>We will start with two dataframes: <strong><code>prcp_data</code> and <code>climdiv_poly</code>.</strong></p>
<p>Code to download and prep these data is shown below. More info: <a href="https://doi.org/10.7289/V5M32STR">doi:10.7289/V5M32STR</a></p>
<div id="prcp_data" class="section level3">
<h3 class="hasAnchor">
<a href="#prcp_data" class="anchor"></a><code>prcp_data</code>
</h3>
<pre><code>#&gt; # A tibble: 1,500 x 345
#&gt;    date       `0101` `0102` `0103` `0104` `0105`
#&gt;    &lt;date&gt;      &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
#&gt;  1 1895-01-01   7.37   8.11   7.77   7.72   7.42
#&gt;  2 1895-02-01   1.41   2.37   2.27   2.72   2.94
#&gt;  3 1895-03-01   7.17   7.5    7.16   7.48   8.29
#&gt;  4 1895-04-01   2.72   3.17   3.07   3.29   4.65
#&gt;  5 1895-05-01   3.06   4.23   2.78   4.61   4.99
#&gt;  6 1895-06-01   4.04   4.68   5.07   4.02   4.09
#&gt;  7 1895-07-01   4.58   4.83   4.09   4.29   4.03
#&gt;  8 1895-08-01   4      5.16   3.81   5.26   4.82
#&gt;  9 1895-09-01   3.41   2.25   1.64   1.52   0.67
#&gt; 10 1895-10-01   2.28   2.29   2.38   2.03   1.93
#&gt; # … with 1,490 more rows, and 339 more variables</code></pre>
</div>
<div id="climdiv_poly" class="section level3">
<h3 class="hasAnchor">
<a href="#climdiv_poly" class="anchor"></a><code>climdiv_poly</code>
</h3>
<pre><code>#&gt; Simple feature collection with 344 features and 2 fields
#&gt; geometry type:  GEOMETRY
#&gt; dimension:      XY
#&gt; bbox:           xmin: -124.7332 ymin: 24.54537 xmax: -66.9501 ymax: 49.38027
#&gt; epsg (SRID):    4269
#&gt; proj4string:    +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs
#&gt; # A tibble: 344 x 3
#&gt;    CLIMDIV CLIMDIV_NAME                   geometry
#&gt;    &lt;chr&gt;   &lt;chr&gt;                    &lt;GEOMETRY [°]&gt;
#&gt;  1 0101    NORTHERN VAL… POLYGON ((-88.05783 35.0…
#&gt;  2 0102    APPALACHIAN … POLYGON ((-86.25819 34.9…
#&gt;  3 0103    UPPER PLAINS  POLYGON ((-88.0181 34.31…
#&gt;  4 0104    EASTERN VALL… POLYGON ((-85.51167 34.5…
#&gt;  5 0105    PIEDMONT PLA… POLYGON ((-85.40764 33.9…
#&gt;  6 0106    PRAIRIE       POLYGON ((-87.97935 32.3…
#&gt;  7 0107    COASTAL PLAIN POLYGON ((-85.00105 32.5…
#&gt;  8 0108    GULF          MULTIPOLYGON (((-87.7888…
#&gt;  9 0201    NORTHWEST     POLYGON ((-114.7559 36.0…
#&gt; 10 0202    NORTHEAST     POLYGON ((-110.5007 37.0…
#&gt; # … with 334 more rows</code></pre>
<p>As shown above, we have two <code>data.frame</code>s. One has 344 columns and the other 344 rows. These 344 climate divisions will be our “instance” dimension when we write to NetCDF.</p>
<p>The NetCDF discrete sampling geometries timeseries standard requires point lat/lon coordinate locations for timeseries data. In the code below, we calculate these values and write the timeseries data to a netcdf file.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1">climdiv_centroids &lt;-<span class="st"> </span>climdiv_poly <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-2" title="2"><span class="st">  </span><span class="kw">st_transform</span>(<span class="dv">5070</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># Albers Equal Area</span></a>
<a class="sourceLine" id="cb5-3" title="3"><span class="st">  </span><span class="kw">st_set_agr</span>(<span class="st">"constant"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-4" title="4"><span class="st">  </span><span class="kw">st_centroid</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-5" title="5"><span class="st">  </span><span class="kw">st_transform</span>(<span class="dv">4269</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="co">#NAD83 Lat/Lon</span></a>
<a class="sourceLine" id="cb5-6" title="6"><span class="st">  </span><span class="kw">st_coordinates</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-7" title="7"><span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/as.data.frame">as.data.frame</a></span>()</a>
<a class="sourceLine" id="cb5-8" title="8"></a>
<a class="sourceLine" id="cb5-9" title="9">nc_file &lt;-<span class="st"> "climdiv_prcp.nc"</span></a>
<a class="sourceLine" id="cb5-10" title="10"></a>
<a class="sourceLine" id="cb5-11" title="11">prcp_dates &lt;-<span class="st"> </span>prcp_data<span class="op">$</span>date</a>
<a class="sourceLine" id="cb5-12" title="12">prcp_data &lt;-<span class="st"> </span><span class="kw">select</span>(prcp_data, <span class="op">-</span>date)</a>
<a class="sourceLine" id="cb5-13" title="13">prcp_meta &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">name =</span> <span class="st">"climdiv_prcp_inches"</span>, </a>
<a class="sourceLine" id="cb5-14" title="14">                  <span class="dt">long_name =</span> <span class="st">"Estimated Monthly Precipitation (Inches)"</span>)</a>
<a class="sourceLine" id="cb5-15" title="15"></a>
<a class="sourceLine" id="cb5-16" title="16"><span class="kw"><a href="../reference/write_timeseries_dsg.html">write_timeseries_dsg</a></span>(<span class="dt">nc_file =</span> nc_file, </a>
<a class="sourceLine" id="cb5-17" title="17">                     <span class="dt">instance_names =</span> climdiv_poly<span class="op">$</span>CLIMDIV, </a>
<a class="sourceLine" id="cb5-18" title="18">                     <span class="dt">lats =</span> climdiv_centroids<span class="op">$</span>Y, </a>
<a class="sourceLine" id="cb5-19" title="19">                     <span class="dt">lons =</span> climdiv_centroids<span class="op">$</span>X, </a>
<a class="sourceLine" id="cb5-20" title="20">                     <span class="dt">times =</span> prcp_dates, </a>
<a class="sourceLine" id="cb5-21" title="21">                     <span class="dt">data =</span> prcp_data, </a>
<a class="sourceLine" id="cb5-22" title="22">                     <span class="dt">data_unit =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rep">rep</a></span>(<span class="st">"inches"</span>, (<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/nrow">ncol</a></span>(prcp_data) <span class="op">-</span><span class="st"> </span><span class="dv">1</span>)), </a>
<a class="sourceLine" id="cb5-23" title="23">                     <span class="dt">data_prec =</span> <span class="st">"float"</span>, </a>
<a class="sourceLine" id="cb5-24" title="24">                     <span class="dt">data_metadata =</span> prcp_meta, </a>
<a class="sourceLine" id="cb5-25" title="25">                     <span class="dt">attributes =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">title =</span> <span class="st">"Demonstation of ncdfgeom"</span>), </a>
<a class="sourceLine" id="cb5-26" title="26">                     <span class="dt">add_to_existing =</span> <span class="ot">FALSE</span>) -&gt;<span class="st"> </span>nc_file</a>
<a class="sourceLine" id="cb5-27" title="27"></a>
<a class="sourceLine" id="cb5-28" title="28">climdiv_poly &lt;-<span class="st"> </span><span class="kw">st_sf</span>(<span class="kw">st_cast</span>(climdiv_poly, <span class="st">"MULTIPOLYGON"</span>))</a>
<a class="sourceLine" id="cb5-29" title="29"></a>
<a class="sourceLine" id="cb5-30" title="30"><span class="kw"><a href="../reference/write_geometry.html">write_geometry</a></span>(<span class="dt">nc_file =</span> <span class="st">"climdiv_prcp.nc"</span>, </a>
<a class="sourceLine" id="cb5-31" title="31">               <span class="dt">geom_data =</span> climdiv_poly,</a>
<a class="sourceLine" id="cb5-32" title="32">               <span class="dt">variables =</span> <span class="st">"climdiv_prcp_inches"</span>) -&gt;<span class="st"> </span>nc_file</a></code></pre></div>
<p>Now we have a file with a structure as shown in the <code>ncdump</code> output below.</p>
<pre><code>#&gt; netcdf climdiv_prcp {
#&gt; dimensions:
#&gt;  instance = 344 ;
#&gt;  time = 1500 ;
#&gt;  instance_name_char = 4 ;
#&gt;  char = 30 ;
#&gt;  node = 26886 ;
#&gt;  part = 676 ;
#&gt; variables:
#&gt;  char instance_name(instance, instance_name_char) ;
#&gt;      instance_name:long_name = "Station Names" ;
#&gt;      instance_name:cf_role = "timeseries_id" ;
#&gt;  double time(time) ;
#&gt;      time:units = "days since 1970-01-01 00:00:00" ;
#&gt;      time:missing_value = -999. ;
#&gt;      time:long_name = "time of measurement" ;
#&gt;      time:standard_name = "time" ;
#&gt;  double lat(instance) ;
#&gt;      lat:units = "degrees_north" ;
#&gt;      lat:missing_value = -999. ;
#&gt;      lat:long_name = "latitude of the observation" ;
#&gt;      lat:standard_name = "latitude" ;
#&gt;  double lon(instance) ;
#&gt;      lon:units = "degrees_east" ;
#&gt;      lon:missing_value = -999. ;
#&gt;      lon:long_name = "longitude of the observation" ;
#&gt;      lon:standard_name = "longitude" ;
#&gt;  float climdiv_prcp_inches(instance, time) ;
#&gt;      climdiv_prcp_inches:units = "inches" ;
#&gt;      climdiv_prcp_inches:missing_value = -2.147484e+09f ;
#&gt;      climdiv_prcp_inches:long_name = "Estimated Monthly Precipitation (Inches)" ;
#&gt;      climdiv_prcp_inches:coordinates = "time lat lon" ;
#&gt;      climdiv_prcp_inches:grid_mapping = "grid_mapping" ;
#&gt;      climdiv_prcp_inches:geometry = "geometry_container" ;
#&gt;  char CLIMDIV(instance, char) ;
#&gt;      CLIMDIV:units = "unknown" ;
#&gt;      CLIMDIV:missing_value = "" ;
#&gt;      CLIMDIV:grid_mapping = "grid_mapping" ;
#&gt;      CLIMDIV:geometry = "geometry_container" ;
#&gt;  char CLIMDIV_NAME(instance, char) ;
#&gt;      CLIMDIV_NAME:units = "unknown" ;
#&gt;      CLIMDIV_NAME:missing_value = "" ;
#&gt;      CLIMDIV_NAME:grid_mapping = "grid_mapping" ;
#&gt;      CLIMDIV_NAME:geometry = "geometry_container" ;
#&gt;  double x_nodes(node) ;
#&gt;      x_nodes:units = "degrees_east" ;
#&gt;      x_nodes:axis = "X" ;
#&gt;  double y_nodes(node) ;
#&gt;      y_nodes:units = "degrees_north" ;
#&gt;      y_nodes:axis = "Y" ;
#&gt;  int geometry_container ;
#&gt;      geometry_container:node_coordinates = "x_nodes y_nodes" ;
#&gt;      geometry_container:geometry_type = "polygon" ;
#&gt;      geometry_container:node_count = "node_count" ;
#&gt;      geometry_container:part_node_count = "part_node_count" ;
#&gt;      geometry_container:interior_ring = "interior_ring" ;
#&gt;      geometry_container:grid_mapping = "grid_mapping" ;
#&gt;  int node_count(instance) ;
#&gt;      node_count:long_name = "count of coordinates in each instance geometry" ;
#&gt;  int part_node_count(part) ;
#&gt;      part_node_count:long_name = "count of nodes in each geometry part" ;
#&gt;  int interior_ring(part) ;
#&gt;      interior_ring:long_name = "type of each geometry part" ;
#&gt;  int grid_mapping ;
#&gt;      grid_mapping:grid_mapping_name = "latitude_longitude" ;
#&gt;      grid_mapping:semi_major_axis = 6378137. ;
#&gt;      grid_mapping:inverse_flattening = 298.257223563 ;
#&gt;      grid_mapping:longitude_of_prime_meridian = 0. ;
#&gt; 
#&gt; // global attributes:
#&gt;      :Conventions = "CF-1.8" ;
#&gt;      :featureType = "timeSeries" ;
#&gt;      :cdm_data_type = "Station" ;
#&gt;      :standard_name_vocabulary = "CF-1.8" ;
#&gt;      :title = "Demonstation of ncdfgeom" ;
#&gt; }</code></pre>
<p>For more information about the polygon and timeseries data structures used here, see the <a href="http://cfconventions.org/cf-conventions/cf-conventions.html">NetCDF-CF standard.</a></p>
</div>
</div>
<div id="read-data" class="section level2">
<h2 class="hasAnchor">
<a href="#read-data" class="anchor"></a>Read Data</h2>
<p>Now that we have all our data in a single file, we can read it back in.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1">prcp_data &lt;-<span class="st"> </span><span class="kw"><a href="../reference/read_timeseries_dsg.html">read_timeseries_dsg</a></span>(<span class="st">"climdiv_prcp.nc"</span>)</a>
<a class="sourceLine" id="cb7-2" title="2"><span class="co">#&gt; Warning in read_timeseries_dsg("climdiv_prcp.nc"): no altitude coordinate</span></a>
<a class="sourceLine" id="cb7-3" title="3"><span class="co">#&gt; found</span></a>
<a class="sourceLine" id="cb7-4" title="4">climdiv_poly &lt;-<span class="st"> </span><span class="kw"><a href="../reference/read_geometry.html">read_geometry</a></span>(<span class="st">"climdiv_prcp.nc"</span>)</a></code></pre></div>
<p>Here’s what the data we read in looks like:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/names">names</a></span>(prcp_data)</a>
<a class="sourceLine" id="cb8-2" title="2"><span class="co">#&gt; [1] "time"              "lats"              "lons"             </span></a>
<a class="sourceLine" id="cb8-3" title="3"><span class="co">#&gt; [4] "alts"              "varmeta"           "data_unit"        </span></a>
<a class="sourceLine" id="cb8-4" title="4"><span class="co">#&gt; [7] "data_prec"         "data_frames"       "global_attributes"</span></a>
<a class="sourceLine" id="cb8-5" title="5"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/class">class</a></span>(prcp_data<span class="op">$</span>time)</a>
<a class="sourceLine" id="cb8-6" title="6"><span class="co">#&gt; [1] "POSIXct" "POSIXt"</span></a>
<a class="sourceLine" id="cb8-7" title="7"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/names">names</a></span>(prcp_data<span class="op">$</span>varmeta<span class="op">$</span>climdiv_prcp_inches)</a>
<a class="sourceLine" id="cb8-8" title="8"><span class="co">#&gt; [1] "name"      "long_name"</span></a>
<a class="sourceLine" id="cb8-9" title="9">prcp_data<span class="op">$</span>data_unit</a>
<a class="sourceLine" id="cb8-10" title="10"><span class="co">#&gt; climdiv_prcp_inches </span></a>
<a class="sourceLine" id="cb8-11" title="11"><span class="co">#&gt;            "inches"</span></a>
<a class="sourceLine" id="cb8-12" title="12">prcp_data<span class="op">$</span>data_prec</a>
<a class="sourceLine" id="cb8-13" title="13"><span class="co">#&gt; climdiv_prcp_inches </span></a>
<a class="sourceLine" id="cb8-14" title="14"><span class="co">#&gt;          "NC_FLOAT"</span></a>
<a class="sourceLine" id="cb8-15" title="15"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/str">str</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/names">names</a></span>(prcp_data<span class="op">$</span>data_frames<span class="op">$</span>climdiv_prcp_inches))</a>
<a class="sourceLine" id="cb8-16" title="16"><span class="co">#&gt;  chr [1:344] "0101" "0102" "0103" "0104" "0105" "0106" "0107" "0108" ...</span></a>
<a class="sourceLine" id="cb8-17" title="17">prcp_data<span class="op">$</span>global_attributes</a>
<a class="sourceLine" id="cb8-18" title="18"><span class="co">#&gt; $nc_summary</span></a>
<a class="sourceLine" id="cb8-19" title="19"><span class="co">#&gt; list()</span></a>
<a class="sourceLine" id="cb8-20" title="20"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb8-21" title="21"><span class="co">#&gt; $nc_date_created</span></a>
<a class="sourceLine" id="cb8-22" title="22"><span class="co">#&gt; list()</span></a>
<a class="sourceLine" id="cb8-23" title="23"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb8-24" title="24"><span class="co">#&gt; $nc_creator_name</span></a>
<a class="sourceLine" id="cb8-25" title="25"><span class="co">#&gt; list()</span></a>
<a class="sourceLine" id="cb8-26" title="26"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb8-27" title="27"><span class="co">#&gt; $nc_creator_email</span></a>
<a class="sourceLine" id="cb8-28" title="28"><span class="co">#&gt; list()</span></a>
<a class="sourceLine" id="cb8-29" title="29"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb8-30" title="30"><span class="co">#&gt; $nc_project</span></a>
<a class="sourceLine" id="cb8-31" title="31"><span class="co">#&gt; list()</span></a>
<a class="sourceLine" id="cb8-32" title="32"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb8-33" title="33"><span class="co">#&gt; $nc_proc_level</span></a>
<a class="sourceLine" id="cb8-34" title="34"><span class="co">#&gt; list()</span></a>
<a class="sourceLine" id="cb8-35" title="35"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb8-36" title="36"><span class="co">#&gt; $nc_title</span></a>
<a class="sourceLine" id="cb8-37" title="37"><span class="co">#&gt; $nc_title[[1]]</span></a>
<a class="sourceLine" id="cb8-38" title="38"><span class="co">#&gt; [1] "Demonstation of ncdfgeom"</span></a>
<a class="sourceLine" id="cb8-39" title="39"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/names">names</a></span>(climdiv_poly)</a>
<a class="sourceLine" id="cb8-40" title="40"><span class="co">#&gt; [1] "CLIMDIV"      "CLIMDIV_NAME" "geom"</span></a></code></pre></div>
<p>To better understand what is actually in this file, let’s visualize the data we just read. Below we join a sum of the precipitation timeseries to the climate division polygons and plot them up.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1">climdiv_poly &lt;-<span class="st"> </span>climdiv_poly <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-2" title="2"><span class="st">  </span><span class="kw">st_transform</span>(<span class="dv">3857</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># web mercator</span></a>
<a class="sourceLine" id="cb9-3" title="3"><span class="st">  </span><span class="kw">st_simplify</span>(<span class="dt">dTolerance =</span> <span class="dv">5000</span>)</a>
<a class="sourceLine" id="cb9-4" title="4"></a>
<a class="sourceLine" id="cb9-5" title="5">title &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/paste">paste0</a></span>(<span class="st">"</span><span class="ch">\n</span><span class="st"> Sum of: "</span>, prcp_data<span class="op">$</span>varmeta<span class="op">$</span>climdiv_prcp_inches<span class="op">$</span>long_name, <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>, </a>
<a class="sourceLine" id="cb9-6" title="6">                <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/format">format</a></span>(prcp_data<span class="op">$</span>time[<span class="dv">1</span>], </a>
<a class="sourceLine" id="cb9-7" title="7">                         <span class="st">"%Y-%m"</span>, <span class="dt">tz =</span> <span class="st">"UTC"</span>), <span class="st">" - "</span>, </a>
<a class="sourceLine" id="cb9-8" title="8">                <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/format">format</a></span>(prcp_data<span class="op">$</span>time[<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/length">length</a></span>(prcp_data<span class="op">$</span>time)], </a>
<a class="sourceLine" id="cb9-9" title="9">                         <span class="st">"%Y-%m"</span>, <span class="dt">tz =</span> <span class="st">"UTC"</span>))</a>
<a class="sourceLine" id="cb9-10" title="10"></a>
<a class="sourceLine" id="cb9-11" title="11">prcp_sum &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/apply">apply</a></span>(prcp_data<span class="op">$</span>data_frames<span class="op">$</span>climdiv_prcp_inches, </a>
<a class="sourceLine" id="cb9-12" title="12">                  <span class="dv">2</span>, sum, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb9-13" title="13"></a>
<a class="sourceLine" id="cb9-14" title="14">prcp &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/data.frame">data.frame</a></span>(<span class="dt">CLIMDIV =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/names">names</a></span>(prcp_sum), </a>
<a class="sourceLine" id="cb9-15" title="15">                   <span class="dt">prcp =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/numeric">as.numeric</a></span>(prcp_sum), </a>
<a class="sourceLine" id="cb9-16" title="16">                   <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-17" title="17"><span class="st">  </span><span class="kw">right_join</span>(climdiv_poly, <span class="dt">by =</span> <span class="st">"CLIMDIV"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-18" title="18"><span class="st">  </span><span class="kw">st_as_sf</span>()</a>
<a class="sourceLine" id="cb9-19" title="19"></a>
<a class="sourceLine" id="cb9-20" title="20"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot</a></span>(prcp[<span class="st">"prcp"</span>], <span class="dt">lwd =</span> <span class="fl">0.1</span>, <span class="dt">pal =</span> p_colors, </a>
<a class="sourceLine" id="cb9-21" title="21">     <span class="dt">breaks =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/seq">seq</a></span>(<span class="dv">0</span>, <span class="dv">14000</span>, <span class="dv">1000</span>),</a>
<a class="sourceLine" id="cb9-22" title="22">     <span class="dt">main =</span> title,</a>
<a class="sourceLine" id="cb9-23" title="23">     <span class="dt">key.pos =</span> <span class="dv">3</span>, <span class="dt">key.length =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/layout">lcm</a></span>(<span class="dv">20</span>))</a></code></pre></div>
<p><img src="ncdfgeom_files/figure-html/plot-1.png" width="768"></p>
<p>This is the code used to download and prep the precipitation data.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1"><span class="co"># Description here: ftp://ftp.ncdc.noaa.gov/pub/data/cirs/climdiv/divisional-readme.txt</span></a>
<a class="sourceLine" id="cb10-2" title="2">prcp_url &lt;-<span class="st"> "ftp://ftp.ncdc.noaa.gov/pub/data/cirs/climdiv/climdiv-pcpndv-v1.0.0-20190408"</span></a>
<a class="sourceLine" id="cb10-3" title="3">prcp_file &lt;-<span class="st"> "prcp.txt"</span></a>
<a class="sourceLine" id="cb10-4" title="4"><span class="cf">if</span>(<span class="op">!</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/files">file.exists</a></span>(prcp_file)) {</a>
<a class="sourceLine" id="cb10-5" title="5">  <span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/download.file">download.file</a></span>(<span class="dt">url =</span> prcp_url, <span class="dt">destfile =</span> prcp_file, <span class="dt">quiet =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb10-6" title="6">}</a>
<a class="sourceLine" id="cb10-7" title="7"></a>
<a class="sourceLine" id="cb10-8" title="8">division_url &lt;-<span class="st"> "ftp://ftp.ncdc.noaa.gov/pub/data/cirs/climdiv/CONUS_CLIMATE_DIVISIONS.shp.zip"</span></a>
<a class="sourceLine" id="cb10-9" title="9">division_file &lt;-<span class="st"> "CONUS_CLIMATE_DIVISIONS.shp.zip"</span></a>
<a class="sourceLine" id="cb10-10" title="10"><span class="cf">if</span>(<span class="op">!</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/files">file.exists</a></span>(division_file)) {</a>
<a class="sourceLine" id="cb10-11" title="11">  <span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/download.file">download.file</a></span>(<span class="dt">url =</span> division_url, <span class="dt">destfile =</span> division_file, <span class="dt">quiet =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb10-12" title="12">  <span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/unzip">unzip</a></span>(<span class="st">"CONUS_CLIMATE_DIVISIONS.shp.zip"</span>)</a>
<a class="sourceLine" id="cb10-13" title="13">}</a>
<a class="sourceLine" id="cb10-14" title="14"></a>
<a class="sourceLine" id="cb10-15" title="15">climdiv_poly &lt;-<span class="st"> </span><span class="kw">read_sf</span>(<span class="st">"GIS.OFFICIAL_CLIM_DIVISIONS.shp"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-16" title="16"><span class="st">  </span><span class="kw">select</span>(<span class="st">"CLIMDIV"</span>, <span class="dt">CLIMDIV_NAME =</span> <span class="st">"NAME"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-17" title="17"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">CLIMDIV =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/ifelse">ifelse</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/nchar">nchar</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/character">as.character</a></span>(CLIMDIV)) <span class="op">==</span><span class="st"> </span><span class="dv">3</span>, </a>
<a class="sourceLine" id="cb10-18" title="18">                          <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/paste">paste0</a></span>(<span class="st">"0"</span>,<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/character">as.character</a></span>(CLIMDIV)),</a>
<a class="sourceLine" id="cb10-19" title="19">                          <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/character">as.character</a></span>(CLIMDIV)))</a>
<a class="sourceLine" id="cb10-20" title="20"></a>
<a class="sourceLine" id="cb10-21" title="21">month_strings &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"jan"</span>, <span class="st">"feb"</span>, <span class="st">"mar"</span>, <span class="st">"apr"</span>, <span class="st">"may"</span>, <span class="st">"jun"</span>, </a>
<a class="sourceLine" id="cb10-22" title="22">                   <span class="st">"jul"</span>, <span class="st">"aug"</span>, <span class="st">"sep"</span>, <span class="st">"oct"</span>, <span class="st">"nov"</span>, <span class="st">"dec"</span>)</a>
<a class="sourceLine" id="cb10-23" title="23"></a>
<a class="sourceLine" id="cb10-24" title="24">prcp_data &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/read.table">read.table</a></span>(prcp_file, <span class="dt">header =</span> <span class="ot">FALSE</span>, </a>
<a class="sourceLine" id="cb10-25" title="25">                        <span class="dt">colClasses =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"character"</span>, </a>
<a class="sourceLine" id="cb10-26" title="26">                                       <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rep">rep</a></span>(<span class="st">"numeric"</span>, <span class="dv">12</span>)),</a>
<a class="sourceLine" id="cb10-27" title="27">                        <span class="dt">col.names =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"meta"</span>, month_strings))</a>
<a class="sourceLine" id="cb10-28" title="28"></a>
<a class="sourceLine" id="cb10-29" title="29"><span class="co"># Here we gather the data into a long format and prep it for ncdfgeom.</span></a>
<a class="sourceLine" id="cb10-30" title="30">prcp_data &lt;-<span class="st"> </span>prcp_data <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-31" title="31"><span class="st">  </span><span class="kw">gather</span>(<span class="dt">key =</span> <span class="st">"month"</span>, <span class="dt">value =</span> <span class="st">"precip_inches"</span>, <span class="op">-</span>meta) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-32" title="32"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">climdiv =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/paste">paste0</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/substr">substr</a></span>(meta, <span class="dv">1</span>, <span class="dv">2</span>), <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/substr">substr</a></span>(meta, <span class="dv">3</span>, <span class="dv">4</span>)),</a>
<a class="sourceLine" id="cb10-33" title="33">         <span class="dt">year =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/substr">substr</a></span>(meta, <span class="dv">7</span>, <span class="dv">10</span>),</a>
<a class="sourceLine" id="cb10-34" title="34">         <span class="dt">precip_inches =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/ifelse">ifelse</a></span>(precip_inches <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span>, <span class="ot">NA</span>, precip_inches)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-35" title="35"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">date =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/as.Date">as.Date</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/paste">paste0</a></span>(<span class="st">"01"</span>, <span class="st">"-"</span>, month, <span class="st">"-"</span>, year), </a>
<a class="sourceLine" id="cb10-36" title="36">                        <span class="dt">format =</span> <span class="st">"%d-%b-%Y"</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-37" title="37"><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>meta, <span class="op">-</span>month, <span class="op">-</span>year) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-38" title="38"><span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/filter">filter</a></span>(climdiv <span class="op">%in%</span><span class="st"> </span>climdiv_poly<span class="op">$</span>CLIMDIV) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-39" title="39"><span class="st">  </span><span class="kw">spread</span>(<span class="dt">key =</span> <span class="st">"climdiv"</span>, <span class="dt">value =</span> <span class="st">"precip_inches"</span>)</a>
<a class="sourceLine" id="cb10-40" title="40"></a>
<a class="sourceLine" id="cb10-41" title="41"><span class="co"># Now make sure things are in the same order.</span></a>
<a class="sourceLine" id="cb10-42" title="42">climdiv_names &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/names">names</a></span>(prcp_data)[<span class="dv">2</span><span class="op">:</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/length">length</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/names">names</a></span>(prcp_data))]</a>
<a class="sourceLine" id="cb10-43" title="43">climdiv_row_order &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/match">match</a></span>(climdiv_names, climdiv_poly<span class="op">$</span>CLIMDIV)</a>
<a class="sourceLine" id="cb10-44" title="44">climdiv_poly &lt;-<span class="st"> </span>climdiv_poly[climdiv_row_order, ]</a></code></pre></div>
<p>Here’s the <code>p_colors</code> function used in plotting above.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1">p_colors &lt;-<span class="st"> </span><span class="cf">function</span> (n, <span class="dt">name =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"precip_colors"</span>)) {</a>
<a class="sourceLine" id="cb11-2" title="2"><span class="co"># Thanks! https://quantdev.ssri.psu.edu/tutorials/generating-custom-color-palette-function-r</span></a>
<a class="sourceLine" id="cb11-3" title="3">    p_rgb &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/grDevices/topics/col2rgb">col2rgb</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"#FAFBF3"</span>, <span class="st">"#F0F8E3"</span>, <span class="st">"#D4E9CA"</span>, </a>
<a class="sourceLine" id="cb11-4" title="4">                       <span class="st">"#BBE0CE"</span>, <span class="st">"#B7DAD0"</span>, <span class="st">"#B0CCD7"</span>, </a>
<a class="sourceLine" id="cb11-5" title="5">                       <span class="st">"#A9B8D7"</span>, <span class="st">"#A297C2"</span>, <span class="st">"#8F6F9E"</span>, </a>
<a class="sourceLine" id="cb11-6" title="6">                       <span class="st">"#684A77"</span>, <span class="st">"#41234D"</span>))</a>
<a class="sourceLine" id="cb11-7" title="7">    precip_colors =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/grDevices/topics/rgb">rgb</a></span>(p_rgb[<span class="dv">1</span>,],p_rgb[<span class="dv">2</span>,],p_rgb[<span class="dv">3</span>,],<span class="dt">maxColorValue =</span> <span class="dv">255</span>)</a>
<a class="sourceLine" id="cb11-8" title="8">    name =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/match.arg">match.arg</a></span>(name)</a>
<a class="sourceLine" id="cb11-9" title="9">    orig =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/eval">eval</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/parse">parse</a></span>(<span class="dt">text =</span> name))</a>
<a class="sourceLine" id="cb11-10" title="10">    rgb =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/t">t</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/grDevices/topics/col2rgb">col2rgb</a></span>(orig))</a>
<a class="sourceLine" id="cb11-11" title="11">    temp =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/matrix">matrix</a></span>(<span class="ot">NA</span>, <span class="dt">ncol =</span> <span class="dv">3</span>, <span class="dt">nrow =</span> n)</a>
<a class="sourceLine" id="cb11-12" title="12">    x =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/seq">seq</a></span>(<span class="dv">0</span>, <span class="dv">1</span>, , <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/length">length</a></span>(orig))</a>
<a class="sourceLine" id="cb11-13" title="13">    xg =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/seq">seq</a></span>(<span class="dv">0</span>, <span class="dv">1</span>, , n)</a>
<a class="sourceLine" id="cb11-14" title="14">    <span class="cf">for</span> (k <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>) {</a>
<a class="sourceLine" id="cb11-15" title="15">        hold =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/splinefun">spline</a></span>(x, rgb[, k], <span class="dt">n =</span> n)<span class="op">$</span>y</a>
<a class="sourceLine" id="cb11-16" title="16">        hold[hold <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span>] =<span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb11-17" title="17">        hold[hold <span class="op">&gt;</span><span class="st"> </span><span class="dv">255</span>] =<span class="st"> </span><span class="dv">255</span></a>
<a class="sourceLine" id="cb11-18" title="18">        temp[, k] =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Round">round</a></span>(hold)</a>
<a class="sourceLine" id="cb11-19" title="19">    }</a>
<a class="sourceLine" id="cb11-20" title="20">    palette =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/grDevices/topics/rgb">rgb</a></span>(temp[, <span class="dv">1</span>], temp[, <span class="dv">2</span>], temp[, <span class="dv">3</span>], <span class="dt">maxColorValue =</span> <span class="dv">255</span>)</a>
<a class="sourceLine" id="cb11-21" title="21">    palette</a>
<a class="sourceLine" id="cb11-22" title="22">}</a></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">Introduction</a></li>
      <li><a href="#installation">Installation</a></li>
      <li><a href="#input-data">Input Data</a></li>
      <li><a href="#read-data">Read Data</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by David Blodgett.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
